define("pagelet/appdetail/components/comment.jsx",function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=e("react"),s=n(l),i=e("pagelet/widget/components/rank.jsx"),u=n(i),r=e("pagelet/widget/components/loading.jsx"),c=n(r),d=e("pagelet/appdetail/action/action"),o=n(d),m=e("pagelet/appdetail/store/store"),f=n(m),p=e("constants"),h=s["default"].createClass({displayName:"Comment",getInitialState:function(){var e=this.props.query,t=this.props.filter||{},a=t.score||[];return a=a.map(function(e){return e.value}),a=a.join(","),{id:e.id,country:t.country?t.country.value:p.countryCode.CHINA,duraTime:t.days?t.days.value:1,device:t.device?t.device.value:p.deviceType.IPHONE,bIndex:1,count:1e3,score:a||"1,2,3,4,5",list:[]}},componentDidMount:function(){o["default"].commentDetail({id:this.state.id,duraTime:this.state.duraTime,country:this.state.country,device:this.state.device,bIndex:this.state.bIndex,count:this.state.count,score:this.state.score}),this.unSubscribe=f["default"].listen(this.onStateChange.bind(this))},componentWillUnmount:function(){this.unSubscribe()},onStateChange:function(e){this.setState(e)},render:function(){var e=this.state.list,t=this.props.filter||{},a=t.score||[],n=a.map(function(e){return e.name});return n=n.join(","),s["default"].createElement("div",{className:"comment"},s["default"].createElement("h5",{className:"title"},s["default"].createElement("p",{className:"fr f-txt f10 c999"},n||"所有评级",", ",p.days2Str[this.state.duraTime]),s["default"].createElement("i",null),"评论详情"),s["default"].createElement("table",{className:"border"},s["default"].createElement("tr",null,s["default"].createElement("th",null,"评论内容")),e.map(function(e){return s["default"].createElement("tr",null,s["default"].createElement("td",null,s["default"].createElement("p",null,e.content),s["default"].createElement("div",{className:"c999 f10 mt6"},s["default"].createElement("i",{className:"mr6 t-vt"},e.authorName),s["default"].createElement("i",{className:"mr6 t-vt"},e.versionName),s["default"].createElement(u["default"],{value:parseInt(e.score),width:14}),s["default"].createElement("i",{className:"ml6 t-vt"},e.dateTime))))})),this.state.loading?s["default"].createElement(c["default"],null):null)}});t["default"]=h,a.exports=t["default"]});