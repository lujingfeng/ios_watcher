define("pagelet/appdetail/components/detail.jsx",function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},o=e("react"),i=l(o),r=e("jquery"),s=(l(r),e("reactRouter")),u=e("pagelet/widget/components/header.jsx"),d=l(u),p=e("pagelet/appdetail/components/baseinfo.jsx"),c=l(p),m=e("pagelet/appdetail/components/category.jsx"),f=l(m),v=e("pagelet/appdetail/components/appinfo.jsx"),h=l(v),y=e("pagelet/appdetail/components/realrank.jsx"),g=l(y),E=e("pagelet/appdetail/components/version_log"),j=l(E),x=e("pagelet/appdetail/components/keywords.jsx"),I=l(x),b=e("pagelet/appdetail/components/comment.jsx"),S=l(b),q=e("pagelet/appdetail/components/applevel.jsx"),F=l(q),V=e("static/minxins/utils"),w=e("pagelet/widget/components/filter.jsx"),O=l(w),k=e("pagelet/widget/components/dialog.jsx"),C=l(k),N=e("pagelet/appdetail/action/action"),D=(l(N),e("pagelet/appdetail/store/store")),_=l(D),M=i["default"].createClass({displayName:"AppDetail",mixins:[s.History],getInitialState:function(){var e=null,t=this.props.location.query;return t.country&&t.device&&t.days&&t.pay&&(e={},e.days=t.days,e.pay=t.pay,e.country=t.country,e.device=t.device),{realFilter:e,commentFilter:{score:[{name:"1星",value:1},{name:"2星",value:2},{name:"3星",value:3},{name:"4星",value:4},{name:"5星",value:5}],datetime:{name:"7日",value:7}},detailInfo:{},appId:""}},componentDidMount:function(){this.unSubscribe=_["default"].listen(this.onStateChange.bind(this)),V.send({type:"detail",opra:"pv"})},componentWillUnmount:function(){this.unSubscribe()},onStateChange:function(e){if(e.isEight&&this.refs.favComfirm.show(),e.detailInfo){this.setState({detailInfo:e.detailInfo,appId:e.detailInfo.appId});var t=(this.props.location.pathname,this.props.location.query);t.appId=e.detailInfo.appId}},onFilter:function(e){var t=this.props.params;2==t.module?this.setState({realFilter:e}):5==t.module&&this.setState({commentFilter:e})},onFavOk:function(){this.history.pushState(null,"/myfavlist")},handleScroll:function(e){var t=e.target;if(t.offsetHeight+t.scrollTop+10>=t.scrollHeight){var a=this.props.params;5==a.module&&this.refs.comment.loadMore()}},render:function(){var e=this.props.location.query,t=this.state;if(e.appId=this.state.appId||e.appId,e.filter){var a={location:this.props.location},l=this.props.params;if(2==l.module){var o=this.state.realFilter;a.showPayMethod=a.device=a.country=a.days=!0,a.payValue=o&&o.pay?o.pay:{name:"免费",value:"free"},a.deviceValue=o&&o.device?o.device:{name:"iPhone",value:0},a.countryValue=o&&o.country?o.country:{name:"中国",value:1},a.daysValue=o&&o.days?o.days:{name:"今天",value:1}}else if(5==l.module){a.showDateDay=!0,a.score=!0;var o=t.commentFilter;a.datetimeValue=o&&o.datetime?o.datetime:{name:"7日",value:7},a.scoreValue=o&&o.score?o.score:[{name:"1星",value:1},{name:"2星",value:2},{name:"3星",value:3},{name:"4星",value:4},{name:"5星",value:5}],(1==a.datetimeValue.value||-1==a.datetimeValue.value)&&(delete a.datetimeValue.value,delete a.datetimeValue.name)}return i["default"].createElement(O["default"],n({onOk:this.onFilter},a))}return this.renderDetail()},renderDetail:function(){var e,t=this.props.location.query,a=this.props.params,l=!1;return 1==a.module?e=i["default"].createElement(h["default"],{query:t}):2==a.module?(l=!0,e=i["default"].createElement(g["default"],{query:t,filter:this.state.realFilter})):3==a.module?e=i["default"].createElement(j["default"],{query:t}):4==a.module?e=i["default"].createElement(I["default"],{query:t}):5==a.module?(l=!0,e=i["default"].createElement(S["default"],{ref:"comment",query:t,filter:this.state.commentFilter})):6==a.module&&(e=i["default"].createElement(F["default"],{query:t})),i["default"].createElement("div",{className:"c-page c-app-detail"},i["default"].createElement(d["default"],{location:this.props.location,filterEnabled:l,showSideNav:this.props.showSideNav},"应用详情"),i["default"].createElement("div",{className:"c-body",onScroll:this.handleScroll.bind(this)},i["default"].createElement(c["default"],{query:t}),i["default"].createElement(f["default"],{query:t,ctyValue:a.module}),i["default"].createElement("div",{className:"category-detail"},e)),i["default"].createElement(C["default"],{ref:"favComfirm",okText:"管理应用",onOk:this.onFavOk,buttonkey:C["default"].buttonKeys.CANCEL_OK},i["default"].createElement("div",null,i["default"].createElement("p",null,"您关注的应用已达8个"),i["default"].createElement("p",null,"请管理应用或联系客服"))))}});t["default"]=M,a.exports=t["default"]});