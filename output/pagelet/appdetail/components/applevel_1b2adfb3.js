define("pagelet/appdetail/components/applevel.jsx",function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=e("react"),c=a(n),r=e("pagelet/widget/components/rank.jsx"),s=a(r),u=e("pagelet/widget/components/loading.jsx"),d=a(u),m=e("pagelet/appdetail/action/action"),f=a(m),i=e("pagelet/appdetail/store/store"),p=a(i),E=e("constants"),o=c["default"].createClass({displayName:"AppLevel",getInitialState:function(){var e=this.props.query;return{loading:!0,id:e.id,country:E.countryCode.CHINA,device:E.deviceType.IPHONE,history:null,cur:null}},componentDidMount:function(){f["default"].appLevel({id:this.state.id,country:this.state.country,device:this.state.device}),this.unSubscribe=p["default"].listen(this.onStateChange.bind(this))},componentWillUnmount:function(){this.unSubscribe()},onStateChange:function(e){this.setState(e)},render:function(){var e=this.state.cur,t=this.state.history;if(console.log(e,t),this.state.loading)return c["default"].createElement(d["default"],null);var l=100,a=0,n=0,r=0,u=0,m=0,f=0,i=0,p=0,E=0,o=0;return e&&e[5]&&(a=l*e[5].percentage,a=a>1?a:a>0?1:0),e&&e[4]&&(n=l*e[4].percentage,n=n>1?n:a>0?1:0),e&&e[3]&&(r=l*e[3].percentage,r=r>1?r:r>0?1:0),e&&e[2]&&(u=l*e[2].percentage,u=u>1?u:u>0?1:0),e&&e[1]&&(m=l*e[1].percentage,m=m>1?m:m>0?1:0),t&&t[5]&&(f=l*t[5].percentage,f=f>1?f:f>0?1:0),t&&t[4]&&(i=l*t[4].percentage,i=i>1?i:i>0?1:0),t&&e[3]&&(p=l*t[3].percentage,p=p>1?p:p>0?1:0),t&&t[2]&&(E=l*t[2].percentage,E=E>1?E:E>0?1:0),t&&t[1]&&(o=l*t[1].percentage,o=o>1?o:o>0?1:0),c["default"].createElement("div",{className:"app-detail-level"},c["default"].createElement("h5",{className:"title"},c["default"].createElement("i",null),"应用评级"),e?c["default"].createElement("table",{className:"border"},c["default"].createElement("tr",null,c["default"].createElement("th",null,c["default"].createElement("p",{className:"fr mr6"},"最后更新时间:",e.updateTime),c["default"].createElement("p",{className:"fl ml6"},"当前版本评分（",e.versionName,"）"))),c["default"].createElement("tr",null,c["default"].createElement("td",{className:"clearfix"},c["default"].createElement("div",{className:"left fl"},c["default"].createElement("p",{className:"f24 score"},e.averageScore),c["default"].createElement("p",null,c["default"].createElement(s["default"],{value:parseInt(e.averageScore),width:14})),c["default"].createElement("p",{className:"f10"},"评分次数:",e.totalCount)),c["default"].createElement("div",{className:"right fl"},c["default"].createElement("ul",null,c["default"].createElement("li",null,c["default"].createElement("span",null,"5星"),c["default"].createElement("i",{className:"prs",style:{width:a}}),c["default"].createElement("span",{className:"fr"},e[5].count)),c["default"].createElement("li",null,c["default"].createElement("span",null,"4星"),c["default"].createElement("i",{className:"prs",style:{width:n}}),c["default"].createElement("span",{className:"fr"},e[4].count)),c["default"].createElement("li",null,c["default"].createElement("span",null,"3星"),c["default"].createElement("i",{className:"prs",style:{width:r}}),c["default"].createElement("span",{className:"fr"},e[3].count)),c["default"].createElement("li",null,c["default"].createElement("span",null,"2星"),c["default"].createElement("i",{className:"prs",style:{width:u}}),c["default"].createElement("span",{className:"fr"},e[2].count)),c["default"].createElement("li",null,c["default"].createElement("span",null,"1星"),c["default"].createElement("i",{className:"prs",style:{width:m}}),c["default"].createElement("span",{className:"fr"},e[1].count))))))):null,t?c["default"].createElement("table",{className:"border"},c["default"].createElement("tr",null,c["default"].createElement("th",null,c["default"].createElement("p",{className:"fr mr6"},"最后更新时间:",t.updateTime),c["default"].createElement("p",{className:"fl ml6"},"历史版本评分"))),c["default"].createElement("tr",null,c["default"].createElement("td",{className:"clearfix"},c["default"].createElement("div",{className:"left fl"},c["default"].createElement("p",{className:"f24 score"},t.averageScore),c["default"].createElement("p",null,c["default"].createElement(s["default"],{value:parseInt(t.averageScore),width:14})),c["default"].createElement("p",{className:"f10"},"评分次数:",t.totalCount)),c["default"].createElement("div",{className:"right fl"},c["default"].createElement("ul",null,c["default"].createElement("li",null,c["default"].createElement("span",null,"5星"),c["default"].createElement("i",{className:"prs",style:{width:f}}),c["default"].createElement("span",{className:"fr"},t[5].count)),c["default"].createElement("li",null,c["default"].createElement("span",null,"4星"),c["default"].createElement("i",{className:"prs",style:{width:i}}),c["default"].createElement("span",{className:"fr"},t[4].count)),c["default"].createElement("li",null,c["default"].createElement("span",null,"3星"),c["default"].createElement("i",{className:"prs",style:{width:p}}),c["default"].createElement("span",{className:"fr"},t[3].count)),c["default"].createElement("li",null,c["default"].createElement("span",null,"2星"),c["default"].createElement("i",{className:"prs",style:{width:E}}),c["default"].createElement("span",{className:"fr"},t[2].count)),c["default"].createElement("li",null,c["default"].createElement("span",null,"1星"),c["default"].createElement("i",{className:"prs",style:{width:o}}),c["default"].createElement("span",{className:"fr"},t[1].count))))))):null,"error"!=this.state.errorText&&e?null:c["default"].createElement("p",{className:"center c999"},"暂无数据"))}});t["default"]=o,l.exports=t["default"]});