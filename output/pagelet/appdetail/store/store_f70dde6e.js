define("pagelet/appdetail/store/store",function(t,i,a){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var n=t("reflux"),o=e(n),s=t("pagelet/appdetail/action/action"),r=e(s),l=o["default"].createStore({init:function(){this.listenTo(r["default"].appInfo,this.loading),this.listenTo(r["default"].appInfoCmp,this.appInfoCmp),this.listenTo(r["default"].appLevel,this.loading),this.listenTo(r["default"].appLevelCmp,this.appLevelCmp),this.listenTo(r["default"].commentDetail,this.loading),this.listenTo(r["default"].commentDetailCmp,this.commentDetailCmp),this.listenTo(r["default"].ranklatest,this.loading),this.listenTo(r["default"].ranklatestCmp,this.ranklatestCmp),this.listenTo(r["default"].detailVersion,this.loading),this.listenTo(r["default"].detailVersionCmp,this.detailVersionCmp),this.listenTo(r["default"].isFavCmp,this.isFavCmp),this.listenTo(r["default"].addFavCmp,this.addFavCmp)},loading:function(){this.trigger({loading:!0})},appInfoCmp:function(t){var i={loading:!1};t&&(i.detailInfo=t),this.trigger(i)},detailVersionCmp:function(t){var i={loading:!1},a=[];if(t){var e=Object.keys(t)||[];e.forEach(function(i){a.push({version:i,date:t[i]})}),i.versions=a}this.trigger(i)},appLevelCmp:function(t){var i={loading:!1};try{if(t["当前版本"]){var a=t["当前版本"],e=a.starCount;for(var n in e){var o={};a[n]=o,o.count=parseInt(e[n]),o.percentage=0===o.count?o.count:o.count/parseInt(a.totalCount)}i.cur=a}if(t["历史版本"]){var a=t["历史版本"],e=a.starCount;for(var n in e){var o={};a[n]=o,o.count=parseInt(e[n]),o.percentage=0===o.count?o.count:o.count/parseInt(a.totalCount)}i.history=a}}catch(s){i.cur={},i.history={},i.cur[5]={},i.cur[4]={},i.cur[3]={},i.cur[2]={},i.cur[1]={},i.history[5]={},i.history[4]={},i.history[3]={},i.history[2]={},i.history[1]={}}this.trigger(i)},commentDetailCmp:function(t){console.log(t);var i,a=[];if(i=t.comment)for(var e in i)a.push(i[e]);var n={loading:!1};n.list=a,this.trigger(n)},ranklatestCmp:function(t){var i={loading:!1};t.data&&t.data.length&&(i.top1=t.data[0],i.top2=t.data[1]),this.trigger(i)},addFavCmp:function(t){var i={isEight:300==t.status?!0:!1};this.trigger(i)},isFavCmp:function(t){var i={};200==t.status&&(i.isFav=!0),this.trigger(i)}});i["default"]=l,a.exports=i["default"]});