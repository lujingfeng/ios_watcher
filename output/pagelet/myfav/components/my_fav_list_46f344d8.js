define("pagelet/myfav/components/my_fav_list.jsx",function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=e("react"),l=n(i),s=e("reactRouter"),o=e("jquery"),c=n(o),d=e("pagelet/widget/components/header.jsx"),r=n(d),u=e("pagelet/widget/components/loading.jsx"),f=n(u),p=e("pagelet/widget/components/tabs.jsx"),m=(n(p),e("pagelet/widget/components/appItem.jsx")),h=n(m),g=e("pagelet/widget/components/popup.jsx"),v=n(g),b=e("constants"),y=e("pagelet/appdetail/action/action"),S=n(y),E=e("pagelet/appdetail/store/store"),k=(n(E),e("pagelet/myfav/action/action")),x=n(k),I=e("pagelet/myfav/store/store"),C=n(I),N=l["default"].createClass({displayName:"MyFav",mixins:[s.History],getInitialState:function(){return{loading:!0,confirmVisible:!1,list:[]}},componentDidMount:function(){this.unSubscribe=C["default"].listen(this.onStateChange.bind(this)),x["default"].fetFavLsit()},componentWillUnmount:function(){this.unSubscribe()},onStateChange:function(e){this.setState(e)},onDelete:function(e){var t=e.id||e.appId;S["default"].addFav(t,"cancel");var a=this.state.list.filter(function(e){return e.id=e.id||e.appId,e.id==t?e:void 0})[0]||null;a&&(this.state.list.splice(this.state.list.indexOf(a),1),this.setState({list:this.state.list}))},onItemClick:function(e){var t=(this.props.location.query||{},c["default"].extend({},e)),a="/detail/1";t.id=t.id||t.appId,t.device=b.deviceStrToint[t.device],t.country=b.countryToCode[t.country],this.history.pushState(null,a,t)},onTapMasker:function(){this.setState({confirmVisible:!1})},onDeleteHandler:function(e){this.setState({confirmVisible:!0,selectedItem:e})},detete:function(){this.onDelete(this.state.selectedItem),this.setState({confirmVisible:!1})},render:function(){{var e=this;this.props.location.query||{}}return l["default"].createElement("div",{className:"c-page my-fav-page"},l["default"].createElement(r["default"],{filterVisible:!1,showSideNav:this.props.showSideNav},"我的关注"),l["default"].createElement("div",{className:"c-body"},this.state.list.map(function(t,a){return l["default"].createElement(h["default"],{onItemClick:e.onItemClick,key:a,data:t,type:6,isShowDelete:!0,onDelete:e.onDeleteHandler})}),this.state.loading?l["default"].createElement(f["default"],null):null,this.state.loading||this.state.list.length?null:l["default"].createElement("p",{className:"center mt6 c999"},"您还未关注应用")),this.state.confirmVisible?l["default"].createElement(v["default"],{ref:"confirm",onTapMasker:this.onTapMasker},l["default"].createElement("div",{className:"c-confirm"},l["default"].createElement("p",null,"您确定要删除应用关注吗？"),l["default"].createElement("div",null,l["default"].createElement("button",{className:"btn normal",onClick:function(){return e.detete()}},"删除"),l["default"].createElement("button",{className:"btn main-btn",onClick:this.onTapMasker},"取消")))):null)}});t["default"]=N,a.exports=t["default"]});