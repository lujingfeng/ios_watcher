define("pagelet/widget/components/header.jsx",function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=e("react"),s=a(l),n=e("jquery"),r=a(n),c=e("reactRouter"),o=s["default"].createClass({displayName:"Header",mixins:[c.History],getInitialState:function(){var e=void 0;return e="undefined"==typeof this.props.filterVisible?!0:!!this.props.filterVisible,{type:this.props.type||"normal",searchKey:this.props.searchValue||"",filterEnabled:!!this.props.filterEnabled,filterVisible:e}},componentWillReceiveProps:function(e){var t={};e.searchValue!=this.props.searchValue&&(t.searchKey=e.searchValue),e.type!=this.props.type&&(t.type=e.type),e.filterEnabled!=this.props.filterEnabled&&(t.filterEnabled=e.filterEnabled),e.filterVisible!=this.props.filterVisible&&(t.filterVisible=e.filterVisible),this.setState(t)},componentDidMount:function(){},componentWillUnmount:function(){},onStateChange:function(){},onSearch:function(){this.state.searchKey&&this.props.onSearch&&this.props.onSearch(this.state.searchKey)},onCancelSearch:function(){this.props.onCancelSearch&&this.props.onCancelSearch()},toSearch:function(){this.history.pushState(null,"/search/input")},toFilter:function h(){var h=this.props.toFilter,e=this.state.filterEnabled,t=this.props.location;if(e&&h&&h(),e){var i=location.hash.slice(2,location.hash.indexOf("?"));this.history.pushState(null,i,r["default"].extend({filter:!0},t.query))}},render:function(){var e=this,t=this.state.type,i={},a=this.state;return a.filterEnabled||(i.opacity=.5),a.filterVisible||(i.display="none"),s["default"].createElement("div",{className:"c-header"},"search"==t?s["default"].createElement("div",{className:"search"},s["default"].createElement("div",{className:"input-con"},s["default"].createElement("input",{onKeyUp:this.onKeyUp,placeholder:this.props.placeholder,value:this.state.searchKey,onChange:function(t){return e.setState({searchKey:t.target.value})},type:"text"}),s["default"].createElement("i",{className:"icon-q",onClick:this.onSearch})),s["default"].createElement("i",{className:"cl",onClick:this.onCancelSearch},"取消")):null,"normal"==t?s["default"].createElement("div",{className:"normal"},s["default"].createElement("div",{className:"icon-menu",onClick:function(){return e.props.showSideNav()}}),s["default"].createElement("div",{style:a.filterVisible?null:{right:40},className:"middle"},this.props.children),s["default"].createElement("div",{className:"right"},s["default"].createElement("i",{className:"icon-q",onClick:this.toSearch}),s["default"].createElement("i",{style:i,className:"icon-filter",onClick:this.toFilter}))):null)}});t["default"]=o,i.exports=t["default"]});