define("pagelet/widget/components/calendar.jsx",function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=e("react"),r=n(l),c=e("reactRouter"),d=r["default"].createClass({displayName:"Month",getInitialState:function(){return{}},daysOfMonth:function(e,t){var a=new Date(e,t,0);return a.getDate()},onSelect:function(e){this.props.onSelected(e)},render:function(){for(var e=this,t=this.daysOfMonth(this.props.year,this.props.month),a=new Date(this.props.year,this.props.month-1,1),n=a.getDay(),l=[],c=0;n>c;c++)l.push("");for(var d=1;t>=d;d++){var u=+new Date(this.props.year,this.props.month-1,d);l.push({year:this.props.year,month:this.props.month,day:d,time:u})}var i=l.slice(0,7),o=l.slice(7,14),s=l.slice(14,21),m=l.slice(21,28),f=l.slice(28,35),y=l.slice(35,l.length),h=this.props.curDatetime,p=Date.now();if(h&&1==h.value){var E=new Date;h.year=E.getFullYear(),h.month=E.getMonth()+1,h.day=E.getDate()}if(h&&-1==h.value){var E=new Date;E.setTime(E.getTime()-864e5),h.year=E.getFullYear(),h.month=E.getMonth()+1,h.day=E.getDate()}var v=new Date(this.props.year,this.props.month-1);return r["default"].createElement("div",{className:"c-month"},r["default"].createElement("h5",null,v.format("yyyy年MM月")),r["default"].createElement("table",null,r["default"].createElement("tr",null,r["default"].createElement("th",null,"周日"),r["default"].createElement("th",null,"周一"),r["default"].createElement("th",null,"周二"),r["default"].createElement("th",null,"周三"),r["default"].createElement("th",null,"周四"),r["default"].createElement("th",null,"周五"),r["default"].createElement("th",null,"周六")),r["default"].createElement("tr",null,i.map(function(t){var a={};return h&&"undefined"!=typeof h.year&&h.year==t.year&&h.month==t.month&&h.day==t.day&&(a.className="selected",a.id="curDatetime"),t.time>p?a.className=" disabled":a.onClick=function(){e.onSelect(t)},r["default"].createElement("td",a,t.day||"")})),r["default"].createElement("tr",null,o.map(function(t){var a={};return h&&"undefined"!=typeof h.year&&h.year==t.year&&h.month==t.month&&h.day==t.day&&(a.className="selected",a.id="curDatetime"),t.time>p?a.className=" disabled":a.onClick=function(){e.onSelect(t)},r["default"].createElement("td",a,t.day||"")})),r["default"].createElement("tr",null,s.map(function(t){var a={};return h&&"undefined"!=typeof h.year&&h.year==t.year&&h.month==t.month&&h.day==t.day&&(a.className="selected",a.id="curDatetime"),t.time>p?a.className=" disabled":a.onClick=function(){e.onSelect(t)},r["default"].createElement("td",a,t.day||"")})),r["default"].createElement("tr",null,m.map(function(t){var a={};return h&&"undefined"!=typeof h.year&&h.year==t.year&&h.month==t.month&&h.day==t.day&&(a.className="selected",a.id="curDatetime"),t.time>p?a.className=" disabled":a.onClick=function(){e.onSelect(t)},r["default"].createElement("td",a,t.day||"")})),r["default"].createElement("tr",null,f.map(function(t){var a={};return h&&"undefined"!=typeof h.year&&h.year==t.year&&h.month==t.month&&h.day==t.day&&(a.className="selected",a.id="curDatetime"),t.time>p?a.className=" disabled":a.onClick=function(){e.onSelect(t)},r["default"].createElement("td",a,t.day||"")})),r["default"].createElement("tr",null,y.map(function(t){var a={};return h&&"undefined"!=typeof h.year&&h.year==t.year&&h.month==t.month&&h.day==t.day&&(a.className="selected",a.id="curDatetime"),t.time>p?a.className=" disabled":a.onClick=function(){e.onSelect(t)},r["default"].createElement("td",a,t.day||"")}))))}}),u=r["default"].createClass({displayName:"Calendar",mixins:[c.History],getInitialState:function(){return{}},componentDidMount:function(){var e=document.querySelector("#curDatetime");e&&e.scrollIntoView()},onCancel:function(){this.props.cancel&&this.props.cancel()},render:function(){for(var e=new Date,t=e.getFullYear(),a=[],n=2014;t>n;n++){break}for(var l=e.getMonth()+1,c=3;l>=c;c++)a.push(r["default"].createElement(d,{year:t,month:c,curDatetime:this.props.curDatetime,onSelected:this.props.onSelected}));return r["default"].createElement("div",{className:"c-page c-calendar"},r["default"].createElement("div",{className:"hdr"},"选择时间",r["default"].createElement("i",{onClick:this.onCancel},"取消")),r["default"].createElement("div",{className:"c-body",ref:"list"},a))}});t["default"]=u,a.exports=t["default"]});