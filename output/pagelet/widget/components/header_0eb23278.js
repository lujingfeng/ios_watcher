define("pagelet/widget/components/header.jsx",function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=e("react"),l=i(s),n=e("jquery"),r=i(n),o=e("reactRouter"),c=l["default"].createClass({displayName:"Header",mixins:[o.History],getInitialState:function(){var e=void 0;return e="undefined"==typeof this.props.filterVisible?!0:!!this.props.filterVisible,{type:this.props.type||"normal",searchKey:this.props.searchValue||"",filterEnabled:!!this.props.filterEnabled,filterVisible:e}},componentWillReceiveProps:function(e){var t={};e.searchValue!=this.props.searchValue&&(t.searchKey=e.searchValue),e.type!=this.props.type&&(t.type=e.type),e.filterEnabled!=this.props.filterEnabled&&(t.filterEnabled=e.filterEnabled),e.filterVisible!=this.props.filterVisible&&(t.filterVisible=e.filterVisible),this.setState(t)},componentDidMount:function(){var e=this;setTimeout(function(){r["default"](e.refs.search).focus()},500)},componentWillUnmount:function(){},onStateChange:function(){},onSearch:function(){this.state.searchKey&&this.props.onSearch&&this.props.onSearch(this.state.searchKey)},onCancelSearch:function(){this.props.onCancelSearch&&this.props.onCancelSearch()},toSearch:function(){this.history.pushState(null,"/search/input")},toFilter:function h(){var h=this.props.toFilter,e=this.state.filterEnabled,t=this.props.location;if(e&&h&&h(),e){var a=location.hash.slice(2,location.hash.indexOf("?"));this.history.pushState(null,a,r["default"].extend({filter:!0},t.query))}},onSubmit:function(e){e.preventDefault(),this.onSearch()},render:function(){var e=this,t=this.state.type,a={},i=this.state;return i.filterEnabled||(a.opacity=.5),i.filterVisible||(a.display="none"),l["default"].createElement("div",{className:"c-header"},"search"==t?l["default"].createElement("div",{className:"search"},l["default"].createElement("div",{className:"input-con"},l["default"].createElement("form",{onSubmit:this.onSubmit},l["default"].createElement("input",{ref:"search",autoFocus:"autofocus",onKeyUp:this.onKeyUp,placeholder:this.props.placeholder,value:this.state.searchKey,onChange:function(t){return e.setState({searchKey:t.target.value})},type:"search"}),l["default"].createElement("i",{className:"icon-q",onClick:this.onSearch}))),l["default"].createElement("i",{className:"cl",onClick:this.onCancelSearch},"取消")):null,"normal"==t?l["default"].createElement("div",{className:"normal"},l["default"].createElement("div",{className:"icon-menu",onClick:function(){return e.props.showSideNav()}}),l["default"].createElement("div",{style:i.filterVisible?null:{right:40},className:"middle"},this.props.children),l["default"].createElement("div",{className:"right"},l["default"].createElement("i",{className:"icon-q",onClick:this.toSearch}),l["default"].createElement("i",{style:a,className:"icon-filter",onClick:this.toFilter}))):null)}});t["default"]=c,a.exports=t["default"]});